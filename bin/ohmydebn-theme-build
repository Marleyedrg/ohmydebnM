#!/bin/bash

echo "This script is not intended for users!"
echo "It is intended for developers creating theme tarballs."
echo "Press Enter to continue or Ctrl-c to cancel."
read input

echo "Cloning theme repos from github to ~/.local/share/"
for THEME in Catppuccin-GTK-Theme Everforest-GTK-Theme Gruvbox-GTK-Theme Kanagawa-GKT-Theme Osaka-GTK-Theme Rose-Pine-GTK-Theme Tokyonight-GTK-Theme; do
  echo
  echo "Updating theme: $THEME"
  if [ -d ~/.local/share/$THEME ]; then
    cd ~/.local/share/$THEME
    git pull
    cd - >/dev/null
  else
    git clone https://github.com/Fausto-Korpsvart/$THEME ~/.local/share/$THEME
  fi
done

echo
echo "Copying themes to ~/.themes"
if [ -d ~/.themes ]; then
  mv ~/.themes ~/.themes.$(date +%Y%m%d-%H%M%S)
fi
echo
~/.local/share/Catppuccin-GTK-Theme/themes/install.sh --tweaks outline
echo
~/.local/share/Catppuccin-GTK-Theme/themes/install.sh --tweaks outline --tweaks macchiato
echo
~/.local/share/Catppuccin-GTK-Theme/themes/install.sh --tweaks outline --tweaks frappe
echo
~/.local/share/Everforest-GTK-Theme/themes/install.sh --tweaks outline
echo
~/.local/share/Gruvbox-GTK-Theme/themes/install.sh --tweaks outline
echo
~/.local/share/Gruvbox-GTK-Theme/themes/install.sh --tweaks outline --tweaks black --theme yellow
echo
~/.local/share/Kanagawa-GKT-Theme/themes/install.sh --tweaks outline
echo
~/.local/share/Osaka-GTK-Theme/themes/install.sh --tweaks outline --theme teal
echo
~/.local/share/Rose-Pine-GTK-Theme/themes/install.sh --tweaks outline
echo
~/.local/share/Tokyonight-GTK-Theme/themes/install.sh --tweaks outline

echo
echo -n "Copying icons to ~/.icons..."
if [ -d ~/.icons ]; then
  mv ~/.icons ~/.icons.$(date +%Y%m%d-%H%M%S)
fi
mkdir -p ~/.icons
cp -a ~/.local/share/*-Theme/icons/* ~/.icons
echo "done"

echo
echo -n "Creating tarball..."
cd
tar zcf ~/ohmydebn-themes.tar.gz .icons .themes
echo "done"

echo
echo "Finished tarball:"
ls -alh ~/ohmydebn-*.tar.gz

echo
echo "You may need to clean up old ~/.icons.* and ~/.themes.* directories to avoid running out of inodes!"
