#!/bin/bash

OHMYDEBN_BIN=~/.local/share/ohmydebn/bin/
CURRENT_THEME=$($OHMYDEBN_BIN/ohmydebn-theme-current)
INDEX=$($OHMYDEBN_BIN/ohmydebn-theme-list | grep -nxF "$CURRENT_THEME" | cut -d: -f1)
let INDEX--
SELECTION=$( (
  $OHMYDEBN_BIN/ohmydebn-theme-list
  echo "Next Background"
  echo "Install New Theme"
  echo "Remove Theme"
) | /usr/bin/rofi -dpi 1 -i -p "Select a theme" -dmenu -selected-row $INDEX -theme-str 'window {width: 20%;}')

if [ "$SELECTION" == "Install New Theme" ]; then
  /usr/bin/alacritty --class OhMyDebn -e bash -c "$OHMYDEBN_BIN/ohmydebn-show-logo; eval \"$OHMYDEBN_BIN/ohmydebn-theme-install\"; $OHMYDEBN_BIN/ohmydebn-show-done"
elif [ "$SELECTION" == "Remove Theme" ]; then
  /usr/bin/alacritty --class OhMyDebn -e bash -c "$OHMYDEBN_BIN/ohmydebn-show-logo; eval \"$OHMYDEBN_BIN/ohmydebn-theme-remove\"; $OHMYDEBN_BIN/ohmydebn-show-done"
elif [ "$SELECTION" == "Next Background" ]; then
  $OHMYDEBN_BIN/ohmydebn-theme-bg-next
else
  $OHMYDEBN_BIN/ohmydebn-theme-set "$SELECTION"
fi
